(this.webpackJsonpfont=this.webpackJsonpfont||[]).push([[0],{138:function(e,t,a){e.exports={appLayout:"appLayout--2Fi_y",mainSection:"mainSection--1QRhc"}},168:function(e,t,a){e.exports={appHeader:"appHeader--1vzd9",userIcon:"userIcon--2nqHm"}},186:function(e,t,a){},304:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(20),i=a.n(c),s=(a(186),a(103)),o=a(22),u=(a(142),a(85)),l=(a(188),a(179)),j=(a(305),a(178)),d=(a(193),a(177)),b=(a(197),a(93)),O=a(308),h=a(36),p=function(e){return e.auth},f=a(168),v=a.n(f),m="/",x="/user/history",g="/user/current",w="/order/:id",y=a(6),C=u.a.Header,k=function(){var e=Object(h.c)(p).isAuthorized,t=Object(o.f)(),a=Object(n.useCallback)((function(){}),[]),r=Object(n.useCallback)((function(){}),[]),c=Object(n.useCallback)((function(e){return function(){t.push(e)}}),[t]),i=Object(y.jsxs)(b.a,{onClick:a,children:[Object(y.jsx)(b.a.Item,{onClick:c(g),children:"Your car"},"1"),Object(y.jsx)(b.a.Item,{onClick:c(x),children:"History"},"2"),Object(y.jsx)(b.a.Item,{onClick:r,children:"Log out"},"3")]});return Object(y.jsxs)(C,{className:v.a.appHeader,children:[Object(y.jsx)("div",{}),Object(y.jsx)(d.a.Title,{level:2,onClick:c(m),children:"CarSharing"}),e?Object(y.jsx)(l.a,{overlay:i,children:Object(y.jsx)(j.a,{icon:Object(y.jsx)(O.a,{})})}):Object(y.jsx)("div",{})]})},I=a(138),L=a.n(I),M=function(e){var t=e.children;return Object(y.jsxs)(u.a,{className:L.a.appLayout,children:[Object(y.jsx)(k,{}),Object(y.jsx)(u.a,{className:L.a.mainSection,children:t})]})},S=(a(146),a(60)),P=(a(147),a(42)),A=(a(306),a(139)),H=a(309),z=a(310),T=a(48),B=a.n(T),V=a(64),q=a(34),E=a(75),R=a(173),F=a(125),N=a(114),U=a(174),J=a.n(U),W="isAuth",$="token",_=function e(){Object(E.a)(this,e),this.api=J.a.create({baseURL:"/api/v1/"}),this.api.interceptors.request.use((function(e){var t=localStorage.getItem($);return t&&(e.headers.Authorization="Bearer ".concat(t)),e}))},D=new(function(e){Object(F.a)(a,e);var t=Object(N.a)(a);function a(){return Object(E.a)(this,a),t.apply(this,arguments)}return Object(R.a)(a,[{key:"getVehiclesList",value:function(){return this.api.get("vehicles")}},{key:"getVehcileById",value:function(e){return this.api.get("vehicles/".concat(e))}}]),a}(_)),Q=new(function(e){Object(F.a)(a,e);var t=Object(N.a)(a);function a(){var e;Object(E.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).login=function(t){var a=t.email,n=(t.name,t.password);return e.api.post("auth/login",{user:{email:a,password:n}})},e.signUp=function(t){var a=t.email,n=t.name,r=t.password;return e.api.post("auth/signup",{email:a,name:n,password:r,roleId:1,gender:1})},e}return a}(_)),Y=Object(q.b)("@vehicles/get-list",Object(V.a)(B.a.mark((function e(){var t,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.getVehiclesList();case 2:return t=e.sent,a=t.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))),G=Object(q.b)("@vehicles/get-vehicle-by-id",function(){var e=Object(V.a)(B.a.mark((function e(t){var a,n;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.getVehcileById(t);case 2:return a=e.sent,n=a.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),K=function(e){return e.vehicles},X=a(21),Z=Object(q.c)({name:"ui",initialState:{activeModal:null,modalParams:{}},reducers:{showModal:function(e,t){var a=t.payload;return Object(X.a)(Object(X.a)({},e),{},{activeModal:a})},hideModal:function(e){return Object(X.a)(Object(X.a)({},e),{},{activeModal:null})},setModalParams:function(e,t){var a=t.payload;return Object(X.a)(Object(X.a)({},e),{},{modalParams:a})},clearModalParams:function(e){return Object(X.a)(Object(X.a)({},e),{},{modalParams:null})}}}),ee="AUTH_MODAL",te=(a(230),a(176)),ae=(a(232),a(92)),ne=(a(143),a(140)),re=(a(94),a(35)),ce=(a(234),a(115)),ie=function(e){return e.ui},se=Object(q.b)("@auth/login",function(){var e=Object(V.a)(B.a.mark((function e(t){var a,n;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q.login(t);case 2:return a=e.sent,n=a.data,localStorage.setItem($,n.token),localStorage.setItem(W,"true"),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),oe={labelCol:{span:8},wrapperCol:{span:16}},ue={wrapperCol:{offset:8,span:16}},le=function(){var e=Object(h.b)(),t=Object(o.f)(),a=Object(h.c)(ie),r=a.activeModal,c=a.modalParams,i=Object(n.useCallback)(function(){var a=Object(V.a)(B.a.mark((function a(n){var r;return B.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e(se(n));case 2:if(!(null===(r=a.sent)||void 0===r?void 0:r.error)){a.next=6;break}return ce.b.error("Invalid credential"),a.abrupt("return");case 6:t.push("order/".concat(null===c||void 0===c?void 0:c.id));case 7:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),[e,t,c]),s=Object(n.useCallback)((function(){e(Z.actions.hideModal())}),[e]);return Object(y.jsx)(te.a,{title:"Login",visible:r,onOk:i,onCancel:s,footer:[Object(y.jsx)(re.a,{onClick:s,children:"Cancel"},"back")],children:Object(y.jsxs)(ae.a,Object(X.a)(Object(X.a)({},oe),{},{name:"basic",initialValues:{remember:!0},onFinish:i,children:[Object(y.jsx)(ae.a.Item,{label:"E-mail",name:"email",rules:[{required:!0,message:"Please input your email!"}],children:Object(y.jsx)(ne.a,{})}),Object(y.jsx)(ae.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(y.jsx)(ne.a.Password,{})}),Object(y.jsx)(ae.a.Item,Object(X.a)(Object(X.a)({},ue),{},{children:Object(y.jsx)(re.a,{type:"primary",htmlType:"submit",children:"Submit"})}))]}))})},je=A.a.Meta,de=function(){var e=Object(o.f)(),t=Object(h.c)(p).isAuthorized,a=Object(h.c)(K).vehicles,r=Object(h.b)();Object(n.useEffect)((function(){r(Y())}),[r]),console.log(a,"vehicles");var c=Object(n.useCallback)((function(a){return function(){t?e.push("order/".concat(a)):(r(Z.actions.showModal(ee)),r(Z.actions.setModalParams({id:a})))}}),[t,e,r]);return Object(y.jsxs)(S.a,{gutter:[16,16],children:[Object(y.jsx)(le,{}),a.map((function(e){var t=e.id,a=e.image,n=e.name,r=e.isFree,i=e.price,s=e.brand.name;return Object(y.jsx)(P.a,{span:6,children:Object(y.jsx)(A.a,{style:{width:300},cover:Object(y.jsx)("img",{alt:n,src:a}),actions:[r&&Object(y.jsx)(H.a,{twoToneColor:"#52c41a"}),Object(y.jsxs)("div",{children:[i,"$ per hour"]}),Object(y.jsx)(z.a,{twoToneColor:"#eb2f96",onClick:c(t)})],children:Object(y.jsx)(je,{title:s,description:n})})},t)}))]})},be=function(){return Object(y.jsx)("div",{children:"CurrentCar"})},Oe=function(){return Object(y.jsx)("div",{children:"CurrentCar"})},he=function(e){var t=e.match.params.id,a=Object(h.b)(),r=Object(h.c)(K).vehicle;return Object(n.useEffect)((function(){a(G(t))}),[a,t]),r?Object(y.jsx)("div",{children:"Order"}):null},pe=function(){return Object(y.jsx)(s.a,{children:Object(y.jsx)(o.c,{children:Object(y.jsxs)(M,{children:[Object(y.jsx)(o.a,{path:m,component:de,exact:!0}),Object(y.jsx)(o.a,{path:g,component:be,exact:!0}),Object(y.jsx)(o.a,{path:x,component:Oe,exact:!0}),Object(y.jsx)(o.a,{path:w,component:he,exact:!0})]})})})};var fe=function(){return Object(y.jsx)(pe,{})},ve=a(46),me=Object(q.c)({name:"vehicles",initialState:{isLoading:!1,vehicles:[],vehicle:null},reducers:{},extraReducers:function(e){e.addCase(Y.pending,(function(e){return Object(X.a)(Object(X.a)({},e),{},{isLoading:!0})})).addCase(Y.fulfilled,(function(e,t){var a=t.payload;return Object(X.a)(Object(X.a)({},e),{},{isLoading:!1,vehicles:a})})).addCase(G.pending,(function(e){return Object(X.a)(Object(X.a)({},e),{},{isLoading:!0})})).addCase(G.fulfilled,(function(e,t){var a=t.payload;return Object(X.a)(Object(X.a)({},e),{},{isLoading:!1,vehicle:a})}))}}),xe={isAuthorized:!!localStorage.getItem(W),user:null},ge=Object(q.c)({name:"auth",initialState:xe,reducers:{},extraReducers:function(e){return e.addCase(se.fulfilled,(function(e,t){var a=t.payload;return Object(X.a)(Object(X.a)({},e),{},{user:a,isAuthorized:!0})}))}}),we=Object(ve.c)({vehicles:me.reducer,auth:ge.reducer,ui:Z.reducer}),ye=Object(q.a)({devTools:!0,reducer:we});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(303);i.a.render(Object(y.jsx)(r.a.StrictMode,{children:Object(y.jsx)(h.a,{store:ye,children:Object(y.jsx)(fe,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[304,1,2]]]);
//# sourceMappingURL=main.6579decc.chunk.js.map