(this.webpackJsonpfont=this.webpackJsonpfont||[]).push([[0],{159:function(e,t,a){e.exports={appLayout:"appLayout--2Fi_y",mainSection:"mainSection--1QRhc",appFooter:"appFooter--1i1sQ"}},176:function(e,t,a){e.exports={adminTitle:"adminTitle--1eaYj",vehiclesSection:"vehiclesSection--3SB1u"}},205:function(e,t,a){e.exports={appHeader:"appHeader--1vzd9",userIcon:"userIcon--2nqHm"}},219:function(e,t,a){},348:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(32),i=a.n(c),s=(a(219),a(22)),l=a(20),u=a.n(l),o=a(33),d=a(26),b=a(9),j=a(66),h=a(98),O=a(84),p=a(82),m=a(204),f=a.n(m),v="isAuth",x="token",g=1,y=function e(){Object(j.a)(this,e),this.api=f.a.create({baseURL:"/api/v1/"}),this.api.interceptors.request.use((function(e){var t=localStorage.getItem(x);return t&&(e.headers.Authorization="Bearer ".concat(t)),e}))},C=new(function(e){Object(O.a)(a,e);var t=Object(p.a)(a);function a(){return Object(j.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"getVehiclesList",value:function(){return this.api.get("vehicles")}},{key:"getVehcileById",value:function(e){return this.api.get("vehicles/".concat(e))}},{key:"updateVehicleById",value:function(e,t){return this.api.patch("vehicles/".concat(e),Object(b.a)({},t))}},{key:"addVehicle",value:function(e){return this.api.post("vehicles",e)}}]),a}(y)),k=2,w=new(function(e){Object(O.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(j.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).login=function(t){var a=t.email,n=(t.name,t.password);return e.api.post("auth/login",{user:{email:a,password:n}})},e.signUp=function(t){return e.api.post("auth/signup",Object(b.a)(Object(b.a)({},t),{},{roleId:k}))},e.getCurrentUser=function(){return e.api.get("auth/current")},e}return a}(y)),I=new(function(e){Object(O.a)(a,e);var t=Object(p.a)(a);function a(){return Object(j.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"getGenderList",value:function(){return this.api.get("controls/user/gender")}},{key:"getUserCountriesList",value:function(){return this.api.get("controls/user/countries")}},{key:"getVehicleStatuses",value:function(){return this.api.get("controls/car/status")}},{key:"getCarBrandsList",value:function(){return this.api.get("controls/car/brands")}},{key:"getCarGenerationList",value:function(){return this.api.get("controls/car/generation")}},{key:"getCarCountries",value:function(){return this.api.get("controls/car/countries")}},{key:"getBillStatuses",value:function(){return this.api("controls/bill/statuses")}},{key:"getBillPayments",value:function(){return this.api("controls/bill/payments")}}]),a}(y)),S=new(function(e){Object(O.a)(a,e);var t=Object(p.a)(a);function a(){return Object(j.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"billCar",value:function(e){return this.api.post("/bills",Object(b.a)(Object(b.a)({},e),{},{promoCode:null,bookingStatusId:g}))}},{key:"getYouCar",value:function(e){return this.api.get("bills/current/".concat(e))}},{key:"finishRide",value:function(e,t){return this.api.post("bills/finish/".concat(e,"/").concat(t))}},{key:"getBillUserHistory",value:function(e){return this.api.get("bills/history/".concat(e))}}]),a}(y)),P=Object(d.b)("@auth/login",function(){var e=Object(o.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.login(t);case 2:return a=e.sent,n=a.data,localStorage.setItem(x,n.token),localStorage.setItem(v,"true"),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),M=Object(d.b)("@auth/signup",function(){var e=Object(o.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.signUp(t);case 2:return a=e.sent,n=a.data,localStorage.setItem(x,n.token),localStorage.setItem(v,"true"),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),F=Object(d.b)("@auth/get-current-user",Object(o.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.getCurrentUser();case 2:return t=e.sent,a=t.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))),B=Object(d.b)("@auth/logout",(function(){return localStorage.removeItem(x),localStorage.removeItem(v),!0})),q=a(120),V=a(35),L=(a(189),a(115)),N=(a(190),a(109)),T=(a(350),a(213)),A=(a(129),a(72)),E=(a(250),a(53)),R=a(353),U=function(e){return e.auth},G=a(205),H=a.n(G),z="/",D="/user/history",Y="/user/current",W="/order/:id",$="/admin",_=Object(d.c)({name:"ui",initialState:{activeModal:null,modalParams:{}},reducers:{showModal:function(e,t){var a=t.payload;return Object(b.a)(Object(b.a)({},e),{},{activeModal:a})},hideModal:function(e){return Object(b.a)(Object(b.a)({},e),{},{activeModal:null})},setModalParams:function(e,t){var a=t.payload;return Object(b.a)(Object(b.a)({},e),{},{modalParams:a})},clearModalParams:function(e){return Object(b.a)(Object(b.a)({},e),{},{modalParams:null})}}}),J="AUTH_MODAL",Q="SIGN_UP",X="ADD_VEHICLE",Z=(a(162),a(106)),K=(a(116),a(23)),ee=(a(96),a(38)),te=(a(64),a(30)),ae=(a(164),a(83)),ne=(a(117),a(37)),re=function(e){return e.controls},ce=function(e){return e.ui},ie=Object(d.b)("@controls/get-gender-list",Object(o.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.getGenderList();case 2:return t=e.sent,a=t.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))),se=Object(d.b)("@controls/get-user-countries-list",Object(o.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.getUserCountriesList();case 2:return t=e.sent,a=t.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))),le=Object(d.b)("@controls/get-vehicles-status",Object(o.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.getVehicleStatuses();case 2:return t=e.sent,a=t.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))),ue=Object(d.b)("@controls/get-vehicle-statuses",Object(o.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.getCarBrandsList();case 2:return t=e.sent,a=t.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))),oe=Object(d.b)("@controls/get-vehicle-generation",Object(o.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.getCarGenerationList();case 2:return t=e.sent,a=t.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))),de=Object(d.b)("@controls/get-vehicle-countries",Object(o.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.getCarCountries();case 2:return t=e.sent,a=t.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))),be=Object(d.b)("@controls/get-bill-payments",Object(o.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.getBillPayments();case 2:return t=e.sent,a=t.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))),je=a(4),he=ne.a.Option,Oe={labelCol:{span:8},wrapperCol:{span:16}},pe={wrapperCol:{offset:8,span:16}},me=function(){var e=Object(s.b)(),t=Object(s.c)(ce).activeModal,a=Object(s.c)(re),r=a.genders,c=a.userCountries,i=t===Q;Object(n.useEffect)((function(){i&&(e(ie()),e(se()))}),[e,i]);var l=Object(n.useCallback)((function(){e(_.actions.hideModal())}),[e]),d=Object(n.useCallback)(function(){var t=Object(o.a)(u.a.mark((function t(a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(M(a));case 2:if(!(null===(n=t.sent)||void 0===n?void 0:n.error)){t.next=6;break}return ae.b.error("Invalid credential"),t.abrupt("return");case 6:l();case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e,l]);return Object(je.jsx)(Z.a,{title:"SignUp",visible:i,onOk:d,onCancel:l,footer:[Object(je.jsx)(te.a,{onClick:l,children:"Cancel"},"back")],children:Object(je.jsxs)(K.a,Object(b.a)(Object(b.a)({},Oe),{},{name:"basic",initialValues:{remember:!0},onFinish:d,children:[Object(je.jsx)(K.a.Item,{label:"E-mail",name:"email",rules:[{required:!0,message:"Please input your email!"}],children:Object(je.jsx)(ee.a,{})}),Object(je.jsx)(K.a.Item,{label:"Name",name:"name",rules:[{required:!0,message:"Please input your name!"}],children:Object(je.jsx)(ee.a,{})}),Object(je.jsx)(K.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(je.jsx)(ee.a.Password,{})}),Object(je.jsx)(K.a.Item,{name:"genderId",label:"Gender",rules:[{required:!0}],children:Object(je.jsx)(ne.a,{placeholder:"gender",children:r.map((function(e){var t=e.name,a=e.id;return Object(je.jsx)(he,{value:a,children:t},t)}))})}),Object(je.jsx)(K.a.Item,{name:"countryId",label:"Country",rules:[{required:!0}],children:Object(je.jsx)(ne.a,{placeholder:"Country",children:c.map((function(e){var t=e.country,a=e.id;return Object(je.jsx)(he,{value:a,children:t},t)}))})}),Object(je.jsx)(K.a.Item,Object(b.a)(Object(b.a)({},pe),{},{children:Object(je.jsx)(te.a,{type:"primary",htmlType:"submit",children:"Submit"})}))]}))})},fe=a(57),ve=function(e){var t=e.match(/\d{4}-\d{2}-\d{2}/gi);return Object(fe.a)(t,1)[0].replaceAll("-",".")},xe=L.a.Header,ge=function(){var e=Object(s.c)(U),t=e.isAuthorized,a=e.user,r=Object(V.g)(),c=Object(s.b)(),i=Object(n.useCallback)((function(){}),[]),l=Object(n.useCallback)((function(){c(B()),r.push("/")}),[c,r]),u=Object(n.useCallback)((function(e){return function(){r.push(e)}}),[r]),o=Object(n.useCallback)((function(){c(_.actions.showModal(Q))}),[c]),d=Object(n.useCallback)((function(){c(_.actions.showModal(J)),c(_.actions.setModalParams({withoutRedirect:!0}))}),[c]),b="admin"===(null===a||void 0===a?void 0:a.role.name),j=Object(je.jsxs)(E.a,{onClick:i,children:[b&&Object(je.jsx)(E.a.Item,{onClick:u($),children:"Admin Panel"},"4"),!b&&Object(je.jsx)(E.a.Item,{onClick:u(Y),children:"Your car"},"1"),!b&&Object(je.jsx)(E.a.Item,{onClick:u(D),children:"History"},"2"),Object(je.jsx)(E.a.Item,{onClick:l,children:"Log out"},"3")]});return Object(je.jsxs)(xe,{className:H.a.appHeader,children:[Object(je.jsx)("div",{}),Object(je.jsx)(A.a.Title,{level:2,onClick:u(z),children:"CarSharing"}),t?Object(je.jsx)(N.a,{overlay:j,children:Object(je.jsx)(T.a,{icon:Object(je.jsx)(R.a,{})})}):null,!t&&Object(je.jsxs)("div",{style:{display:"flex"},children:[Object(je.jsx)("div",{onClick:d,style:{marginRight:"20px"},children:"Sign In"}),Object(je.jsx)("div",{onClick:o,children:"Sign Up"})]}),Object(je.jsx)(me,{})]})},ye=a(159),Ce=a.n(ye),ke=function(e){var t=e.children;return Object(je.jsxs)(L.a,{className:Ce.a.appLayout,children:[Object(je.jsx)(ge,{}),Object(je.jsx)(L.a,{className:Ce.a.mainSection,children:t}),Object(je.jsx)(L.a.Footer,{className:Ce.a.appFooter,children:Object(je.jsx)("a",{href:"mailto:carsharinghelp@gmail.com",children:"Need help?"})})]})},we=(a(168),a(69)),Ie=(a(169),a(46)),Se=(a(136),a(58)),Pe=a(354),Me=a(355),Fe=a(151),Be=Object(d.b)("@vehicles/get-list",Object(o.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.getVehiclesList();case 2:return t=e.sent,a=t.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))),qe=Object(d.b)("@vehicles/get-vehicle-by-id",function(){var e=Object(o.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.getVehcileById(t);case 2:return a=e.sent,n=a.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ve=Object(d.b)("@vehicles/update-vehicle-by-id",function(){var e=Object(o.a)(u.a.mark((function e(t,a){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,r=Object(Fe.a)(t,["id"]),e.next=3,C.updateVehicleById(n,r);case 3:a.dispatch(Be());case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),Le=Object(d.b)("@vehicles/update-vehicle-by-id",function(){var e=Object(o.a)(u.a.mark((function e(t,a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.addVehicle(t);case 2:a.dispatch(Be());case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),Ne=(Object(d.b)("@vehicles/get-current-car",function(){var e=Object(o.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.getYouCar(t);case 2:return a=e.sent,n=a.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),function(e){return e.vehicles}),Te={labelCol:{span:8},wrapperCol:{span:16}},Ae={wrapperCol:{offset:8,span:16}},Ee=function(){var e=Object(s.b)(),t=Object(V.g)(),a=Object(s.c)(ce),r=a.activeModal,c=a.modalParams,i=Object(n.useCallback)(function(){var a=Object(o.a)(u.a.mark((function a(n){var r;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e(P(n));case 2:if(!(null===(r=a.sent)||void 0===r?void 0:r.error)){a.next=6;break}return ae.b.error("Invalid credential"),a.abrupt("return");case 6:(null===c||void 0===c?void 0:c.withoutRedirect)?(e(_.actions.hideModal()),e(_.actions.clearModalParams())):t.push("order/".concat(null===c||void 0===c?void 0:c.id));case 7:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),[e,t,c]),l=Object(n.useCallback)((function(){e(_.actions.hideModal())}),[e]);return Object(je.jsx)(Z.a,{title:"Login",visible:r===J,onOk:i,onCancel:l,footer:[Object(je.jsx)(te.a,{onClick:l,children:"Cancel"},"back")],children:Object(je.jsxs)(K.a,Object(b.a)(Object(b.a)({},Te),{},{name:"basic",initialValues:{remember:!0},onFinish:i,children:[Object(je.jsx)(K.a.Item,{label:"E-mail",name:"email",rules:[{required:!0,message:"Please input your email!"}],children:Object(je.jsx)(ee.a,{})}),Object(je.jsx)(K.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(je.jsx)(ee.a.Password,{})}),Object(je.jsx)(K.a.Item,Object(b.a)(Object(b.a)({},Ae),{},{children:Object(je.jsx)(te.a,{type:"primary",htmlType:"submit",children:"Submit"})}))]}))})},Re=Se.a.Meta,Ue=function(){var e=Object(V.g)(),t=Object(s.c)(U).isAuthorized,a=Object(s.c)(Ne).vehicles,r=Object(s.b)();Object(n.useEffect)((function(){r(Be())}),[r]);var c=Object(n.useCallback)((function(a){return function(){t?e.push("order/".concat(a)):(r(_.actions.showModal(J)),r(_.actions.setModalParams({id:a})))}}),[t,e,r]);return Object(je.jsxs)(we.a,{gutter:[16,16],children:[Object(je.jsx)(Ee,{}),a.map((function(e){var t=e.id,a=e.image,n=e.name,r=e.isFree,i=e.price,s=e.brand.name;return Object(je.jsx)(Ie.a,{span:6,children:Object(je.jsx)(Se.a,{style:{width:300,height:300},cover:Object(je.jsx)("img",{alt:n,src:a,style:{height:155}}),actions:[r&&Object(je.jsx)(Pe.a,{twoToneColor:"#52c41a"}),Object(je.jsxs)("div",{children:[i,"$ per hour"]}),Object(je.jsx)(Me.a,{twoToneColor:"#eb2f96",onClick:c(t)})],children:Object(je.jsx)(Re,{title:s,description:n})})},t)}))]})},Ge=Object(d.b)("@bills/bill-vehicle",function(){var e=Object(o.a)(u.a.mark((function e(t,a){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.billCar(t);case 3:return n=e.sent,r=n.data,console.log(r),ae.b.success("Processing complete!"),e.abrupt("return",r);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",a.rejectWithValue(e.t0));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}()),He=Object(d.b)("@bills/get-current-car",function(){var e=Object(o.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.getYouCar(t);case 2:return a=e.sent,n=a.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ze=Object(d.b)("@bills/finish-current-ride",function(){var e=Object(o.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.billId,n=t.vehicleId,e.next=3,S.finishRide(a,n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),De=Object(d.b)("@bills/user-history",function(){var e=Object(o.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.getBillUserHistory(t);case 2:return a=e.sent,n=a.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ye=Se.a.Meta,We=function(){var e=Object(s.b)(),t=Object(s.c)(U).user,a=Object(s.c)(Ne).currentCar;Object(n.useEffect)((function(){(null===t||void 0===t?void 0:t.id)&&e(He(t.id))}),[null===t||void 0===t?void 0:t.id,e]);var r=Object(n.useCallback)((function(){e(ze({billId:null===a||void 0===a?void 0:a.id,vehicleId:null===a||void 0===a?void 0:a.vehicleId}))}),[e,a]),c=Object(n.useCallback)((function(){var e=a.vehicle,t=a.payment,n=a.totalCost,c=a.endPlace;return Object(je.jsx)(Se.a,{style:{width:300,margin:"0 auto"},cover:Object(je.jsx)("img",{alt:e.name,src:e.image}),actions:[Object(je.jsxs)("div",{children:["Cost: ",n,"$"]}),null,Object(je.jsx)("div",{onClick:r,children:"Finish Ride"})],children:Object(je.jsx)(Ye,{title:e.name,description:Object(je.jsxs)(je.Fragment,{children:[Object(je.jsxs)("p",{children:["End place: ",c]}),Object(je.jsxs)("p",{children:["Paymentys: ",t.method]})]})})})}),[a,r]);return a?c():Object(je.jsx)(A.a.Title,{style:{margin:"0 auto"},level:4,children:"No Car"})},$e=Se.a.Meta,_e=function(){var e=Object(s.b)(),t=Object(s.c)(U).user,a=Object(s.c)(Ne).history,r=Object(n.useCallback)((function(){return a.map((function(e){var t=e.vehicle,a=e.payment,n=e.totalCost,r=e.endPlace,c=e.createdAt;return Object(je.jsx)(Ie.a,{xs:6,children:Object(je.jsx)(Se.a,{style:{width:300,margin:"0 auto"},cover:Object(je.jsx)("img",{alt:t.name,src:t.image,style:{maxHeight:155}}),actions:[Object(je.jsxs)("div",{children:["Cost: ",n,"$"]})],children:Object(je.jsx)($e,{title:t.name,description:Object(je.jsxs)(je.Fragment,{children:[Object(je.jsxs)("p",{children:["End place: ",r]}),Object(je.jsxs)("p",{children:["Paymentys: ",a.method]}),Object(je.jsx)("p",{style:{fontWeight:"bold"},children:ve(c)})]})})})})}))}),[a]);return Object(n.useEffect)((function(){(null===t||void 0===t?void 0:t.id)&&e(De(t.id))}),[e,t]),a.length?Object(je.jsx)(we.a,{gutter:[16,16],children:r()}):Object(je.jsx)(A.a.Title,{level:2,children:"No History"})},Je=(a(351),a(177)),Qe=Se.a.Meta,Xe=function(e){var t=e.vehicle;return t?Object(je.jsx)(Se.a,{style:{width:300},cover:Object(je.jsx)("img",{alt:t.name,src:t.image}),actions:[null,Object(je.jsxs)("div",{children:[t.price,"$ per hour"]}),null],children:Object(je.jsx)(Qe,{title:t.brand.name,description:t.name})}):null},Ze=a(90),Ke=a.n(Ze),et=ne.a.Option,tt=function(e){var t=e.handleChangeForm,a=e.defaultValue,n=Object(s.c)(re).paymentsMethod;return Object(je.jsx)(ne.a,{defaultValue:a,onChange:function(e){return t({paymentId:e})},className:Ke.a.paymentsContainer,placeholder:"Choose payment",children:n.map((function(e){var t=e.id,a=e.method;return Object(je.jsx)(et,{value:t,children:a},t)}))})},at=(a(335),a(212)),nt=K.a.useForm,rt={miles:0,totalCost:0},ct=function(e){var t=e.handleSubmit,a=e.previousValues,r=void 0===a?{}:a,c=e.vehicle,i=nt(),s=Object(fe.a)(i,1)[0],l=Object(b.a)(Object(b.a)({},rt),r),u=Object(n.useCallback)((function(){t(s.getFieldsValue())}),[t,s]),o=Object(n.useCallback)((function(e){s.setFieldsValue({totalCost:e*(null===c||void 0===c?void 0:c.price)}),u()}),[s,u,c]);return Object(je.jsxs)(K.a,{form:s,onFinish:t,initialValues:l,className:Ke.a.tripInformation,children:[Object(je.jsx)(K.a.Item,{name:"endPlace",label:"End place",rules:[{required:!0}],children:Object(je.jsx)(ee.a,{onChange:u})}),Object(je.jsx)(K.a.Item,{name:"totalCost",label:"Total Cost",children:Object(je.jsx)(ee.a,{disabled:!0})}),Object(je.jsx)(K.a.Item,{name:"miles",label:"Miles",rules:[{required:!0}],children:Object(je.jsx)(at.a,{onChange:o})})]})},it=Je.a.Step,st=new Map([[0,"Confirm"],[1,"Next"],[2,"Submit"]]),lt=function(e){var t=e.match.params.id,a=Object(s.b)(),c=Object(V.g)(),i=Object(s.c)(Ne).vehicle,l=Object(s.c)(U).user,u=Object(n.useState)({}),o=Object(fe.a)(u,2),d=o[0],j=o[1],h=Object(n.useState)(0),O=Object(fe.a)(h,2),p=O[0],m=O[1],f=Object(n.useCallback)((function(e){j(Object(b.a)(Object(b.a)({},d),e))}),[d,j]),v=[{title:"Confirm Vehicle",content:Object(je.jsx)(Xe,{vehicle:i})},{title:"Trip Info",content:Object(je.jsx)(ct,{handleSubmit:function(e){j(e)},previousValues:d,vehicle:i})},{title:"Payments",content:Object(je.jsx)(tt,{handleChangeForm:f,defaultValue:null===d||void 0===d?void 0:d.paymentId})}],x=Object(n.useCallback)((function(){m(p+1)}),[p]),g=Object(n.useCallback)((function(){m(p-1)}),[p]);Object(n.useEffect)((function(){a(qe(t)),a(be())}),[a,t]);var y=1===p&&!(null===d||void 0===d?void 0:d.endPlace),C=p===v.length-1?function(){a(Ge(Object(b.a)(Object(b.a)({},d),{},{vehicleId:+t,userId:null===l||void 0===l?void 0:l.id}))),a(_.actions.hideModal()),a(_.actions.clearModalParams()),c.push("/")}:x;return Object(je.jsxs)(je.Fragment,{children:[Object(je.jsx)(Je.a,{current:p,children:v.map((function(e){return Object(je.jsx)(it,{title:e.title},e.title)}))}),Object(je.jsx)("div",{className:Ke.a.stepContainer,children:r.a.cloneElement(v[p].content,{next:x,prev:g})}),Object(je.jsxs)("div",{className:Ke.a.buttonSection,children:[Object(je.jsx)(te.a,{type:"primary",onClick:C,disabled:y,children:st.get(p)}),p>0&&Object(je.jsx)(te.a,{style:{margin:"0 8px"},onClick:function(){return g()},children:"Previous"})]})]})},ut=(a(349),a(211)),ot=[{title:"Brand",dataIndex:["brand","name"],key:"brand"},{title:"Name",dataIndex:"name",key:"name"},{title:"Current place",dataIndex:"position",key:"position"},{title:"Price",dataIndex:"price",key:"price"},{title:"Free",dataIndex:"isFree",key:"free"},{title:"Status",dataIndex:["stauts","status"],key:"status"}],dt=(a(170),a(73)),bt=K.a.useForm,jt=ne.a.Option,ht=function(e){var t=e.vehicle,a=e.vehicleStatuses,r=e.vehicleBrands,c=bt(),i=Object(fe.a)(c,1)[0],l=Object(n.useState)(""),u=Object(fe.a)(l,2),o=u[0],d=u[1],j=Object(s.b)(),h=Object(n.useCallback)((function(e){console.log(e),j(Ve(Object(b.a)({id:t.id},e)))}),[j,t.id]);return Object(n.useEffect)((function(){i.setFieldsValue({name:null===t||void 0===t?void 0:t.name,statusId:null===t||void 0===t?void 0:t.stauts.id,position:null===t||void 0===t?void 0:t.position,isFree:null===t||void 0===t?void 0:t.isFree,price:null===t||void 0===t?void 0:t.price,brandId:null===t||void 0===t?void 0:t.brandId,image:null===t||void 0===t?void 0:t.image}),d(null===t||void 0===t?void 0:t.image)}),[t,i]),Object(je.jsxs)(K.a,{form:i,onFinish:h,children:[Object(je.jsx)(K.a.Item,{name:"name",label:"Name",rules:[{required:!0}],children:Object(je.jsx)(ee.a,{})}),Object(je.jsx)(K.a.Item,{name:"price",label:"Price",rules:[{required:!0}],children:Object(je.jsx)(ee.a,{type:"number"})}),Object(je.jsx)(K.a.Item,{name:"position",label:"Place",rules:[{required:!0}],children:Object(je.jsx)(ee.a,{})}),Object(je.jsx)(K.a.Item,{name:"isFree",label:"Free",valuePropName:"checked",children:Object(je.jsx)(dt.a,{})}),Object(je.jsx)(K.a.Item,{name:"brandId",label:"Brand",rules:[{required:!0}],children:Object(je.jsx)(ne.a,{placeholder:"Brand",children:r.map((function(e){var t=e.name,a=e.id;return Object(je.jsx)(jt,{value:a,children:t},t)}))})}),Object(je.jsx)(K.a.Item,{name:"statusId",label:"Status",rules:[{required:!0}],children:Object(je.jsx)(ne.a,{placeholder:"Status",children:a.map((function(e){var t=e.status,a=e.id;return Object(je.jsx)(jt,{value:a,children:t},t)}))})}),Object(je.jsx)(K.a.Item,{name:"image",label:"Vehicle Preview",rules:[{required:!0}],children:Object(je.jsx)(ee.a,{onChange:function(e){d(e.target.value)}})}),Object(je.jsx)("img",{src:o,alt:t.name,style:{width:"100%",height:"auto",maxWidth:"300px",marginBottom:"20px"}}),Object(je.jsx)(K.a.Item,{children:Object(je.jsx)(te.a,{type:"primary",htmlType:"submit",children:"Save"})})]})},Ot=a(356),pt=a(176),mt=a.n(pt),ft=K.a.useForm,vt=ne.a.Option,xt=function(){var e=Object(s.b)(),t=ft(),a=Object(fe.a)(t,1)[0],r=Object(s.c)(ce).activeModal,c=Object(s.c)(re),i=c.vehicleStatuses,l=c.vehicleBrands,u=c.carGeneration,o=c.carCountries,d=r===X,b=Object(n.useCallback)((function(){e(_.hideModal())}),[e]),j=Object(n.useCallback)((function(t){e(Le(t)),b()}),[e,b]);return Object(je.jsx)(Z.a,{title:"Add vehicle",visible:d,onOk:j,onCancel:b,footer:[Object(je.jsx)(te.a,{onClick:b,children:"Cancel"},"back")],children:Object(je.jsxs)(K.a,{form:a,onFinish:j,children:[Object(je.jsx)(K.a.Item,{name:"name",label:"Name",rules:[{required:!0}],children:Object(je.jsx)(ee.a,{})}),Object(je.jsx)(K.a.Item,{name:"image",label:"Image URL",rules:[{required:!0}],children:Object(je.jsx)(ee.a,{})}),Object(je.jsx)(K.a.Item,{name:"price",label:"Price",rules:[{required:!0}],children:Object(je.jsx)(ee.a,{type:"number"})}),Object(je.jsx)(K.a.Item,{name:"odometer",label:"Odometer",rules:[{required:!0}],children:Object(je.jsx)(ee.a,{type:"number"})}),Object(je.jsx)(K.a.Item,{name:"position",label:"Place",rules:[{required:!0}],children:Object(je.jsx)(ee.a,{})}),Object(je.jsx)(K.a.Item,{name:"isFree",label:"Free",valuePropName:"checked",children:Object(je.jsx)(dt.a,{})}),Object(je.jsx)(K.a.Item,{name:"brandId",label:"Brand",rules:[{required:!0}],children:Object(je.jsx)(ne.a,{placeholder:"Brand",children:l.map((function(e){var t=e.name,a=e.id;return Object(je.jsx)(vt,{value:a,children:t},t)}))})}),Object(je.jsx)(K.a.Item,{name:"statusId",label:"Status",rules:[{required:!0}],children:Object(je.jsx)(ne.a,{placeholder:"Status",children:i.map((function(e){var t=e.status,a=e.id;return Object(je.jsx)(vt,{value:a,children:t},t)}))})}),Object(je.jsx)(K.a.Item,{name:"carGenerationId",label:"Car Generation",rules:[{required:!0}],children:Object(je.jsx)(ne.a,{placeholder:"Generation",children:u.map((function(e){var t=e.range,a=e.id;return Object(je.jsx)(vt,{value:a,children:t},t)}))})}),Object(je.jsx)(K.a.Item,{name:"vehicleCountriesId",label:"Car Country",rules:[{required:!0}],children:Object(je.jsx)(ne.a,{placeholder:"Country",children:o.map((function(e){var t=e.country,a=e.id;return Object(je.jsx)(vt,{value:a,children:t},t)}))})}),Object(je.jsx)(K.a.Item,{children:Object(je.jsx)(te.a,{type:"primary",htmlType:"submit",children:"Save"})})]})})},gt=function(){var e=Object(s.b)(),t=Object(s.c)(Ne).vehicles,a=Object(s.c)(re),r=a.vehicleStatuses,c=a.vehicleBrands;Object(n.useEffect)((function(){e(Be()),e(le()),e(ue()),e(oe()),e(de())}),[e]);var i=Object(n.useCallback)((function(){e(_.actions.showModal(X))}),[e]),l=Object(n.useCallback)((function(e){return Object(je.jsx)(ht,{vehicle:e,vehicleStatuses:r,vehicleBrands:c})}),[r,c]);return Object(je.jsxs)("div",{children:[Object(je.jsx)(A.a.Title,{className:mt.a.adminTitle,children:"Admin Panel"}),Object(je.jsxs)("div",{className:mt.a.vehiclesSection,children:[Object(je.jsx)(A.a.Title,{children:"Vehicles"}),Object(je.jsx)(te.a,{type:"primary",shape:"circle",icon:Object(je.jsx)(Ot.a,{}),size:"large",onClick:i})]}),Object(je.jsx)(ut.a,{columns:ot,dataSource:t,expandable:{expandedRowRender:l}}),Object(je.jsx)(xt,{})]})},yt={role:{name:""}},Ct=function(e){e.children;var t=e.allowedRoles,a=e.component,n=e.path,r=Object(Fe.a)(e,["children","allowedRoles","component","path"]),c=(Object(s.c)(U).user||yt).role.name;return t&&-1===t.indexOf(c)?Object(je.jsx)(V.a,{to:z}):Object(je.jsx)(V.b,Object(b.a)({path:n,component:a,exact:!0},r))},kt=function(){return Object(je.jsx)(q.a,{children:Object(je.jsx)(V.d,{children:Object(je.jsxs)(ke,{children:[Object(je.jsx)(V.b,{path:z,component:Ue,exact:!0}),Object(je.jsx)(Ct,{path:Y,component:We,exact:!0}),Object(je.jsx)(V.b,{path:D,component:_e,exact:!0}),Object(je.jsx)(V.b,{path:W,component:lt,exact:!0}),Object(je.jsx)(Ct,{path:$,component:gt,exact:!0,allowedRoles:["admin"]})]})})})};var wt=function(){var e=Object(s.b)();return Object(n.useEffect)((function(){e(F())}),[e]),Object(je.jsx)(kt,{})},It=a(62),St=Object(d.c)({name:"vehicles",initialState:{isLoading:!1,vehicles:[],vehicle:null,currentCar:null,history:[]},reducers:{},extraReducers:function(e){e.addCase(Be.pending,(function(e){return Object(b.a)(Object(b.a)({},e),{},{isLoading:!0})})).addCase(Be.fulfilled,(function(e,t){var a=t.payload;return Object(b.a)(Object(b.a)({},e),{},{isLoading:!1,vehicles:a})})).addCase(qe.pending,(function(e){return Object(b.a)(Object(b.a)({},e),{},{isLoading:!0})})).addCase(qe.fulfilled,(function(e,t){var a=t.payload;return Object(b.a)(Object(b.a)({},e),{},{isLoading:!1,vehicle:a})})).addCase(He.fulfilled,(function(e,t){var a=t.payload;return Object(b.a)(Object(b.a)({},e),{},{currentCar:a})})).addCase(ze.fulfilled,(function(e){return Object(b.a)(Object(b.a)({},e),{},{currentCar:null})})).addCase(De.fulfilled,(function(e,t){var a=t.payload;return Object(b.a)(Object(b.a)({},e),{},{history:a})}))}}),Pt={isAuthorized:!!localStorage.getItem(v),user:null,token:null},Mt=Object(d.c)({name:"auth",initialState:Pt,reducers:{},extraReducers:function(e){e.addCase(P.fulfilled,(function(e,t){var a=t.payload,n=a.userDb,r=a.token;return Object(b.a)(Object(b.a)({},e),{},{user:n,token:r,isAuthorized:!0})})).addCase(M.fulfilled,(function(e,t){var a=t.payload,n=a.user,r=a.token;return Object(b.a)(Object(b.a)({},e),{},{user:n,token:r,isAuthorized:!0})})).addCase(F.fulfilled,(function(e,t){var a=t.payload;return Object(b.a)(Object(b.a)({},e),{},{user:a,isAuthorized:!0})})).addCase(B.pending,(function(){return Pt}))}}),Ft=Object(d.c)({name:"controls",initialState:{genders:[],userCountries:[],vehicleStatuses:[],vehicleBrands:[],carGeneration:[],carCountries:[],paymentsMethod:[]},reducers:{},extraReducers:function(e){e.addCase(ie.fulfilled,(function(e,t){var a=t.payload;return Object(b.a)(Object(b.a)({},e),{},{genders:a})})).addCase(se.fulfilled,(function(e,t){var a=t.payload;return Object(b.a)(Object(b.a)({},e),{},{userCountries:a})})).addCase(le.fulfilled,(function(e,t){var a=t.payload;return Object(b.a)(Object(b.a)({},e),{},{vehicleStatuses:a})})).addCase(ue.fulfilled,(function(e,t){var a=t.payload;return Object(b.a)(Object(b.a)({},e),{},{vehicleBrands:a})})).addCase(oe.fulfilled,(function(e,t){var a=t.payload;return Object(b.a)(Object(b.a)({},e),{},{carGeneration:a})})).addCase(de.fulfilled,(function(e,t){var a=t.payload;return Object(b.a)(Object(b.a)({},e),{},{carCountries:a})})).addCase(be.fulfilled,(function(e,t){var a=t.payload;return Object(b.a)(Object(b.a)({},e),{},{paymentsMethod:a})}))}}),Bt=Object(It.c)({vehicles:St.reducer,auth:Mt.reducer,ui:_.reducer,controls:Ft.reducer}),qt=Object(d.a)({devTools:!0,reducer:Bt});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(347);i.a.render(Object(je.jsx)(r.a.StrictMode,{children:Object(je.jsx)(s.a,{store:qt,children:Object(je.jsx)(wt,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},90:function(e,t,a){e.exports={stepContainer:"stepContainer--JDXT9",buttonSection:"buttonSection--xYhDT",tripInformation:"tripInformation--1Zrvh",paymentsContainer:"paymentsContainer--3PIud"}}},[[348,1,2]]]);
//# sourceMappingURL=main.e6765092.chunk.js.map